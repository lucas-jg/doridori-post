### DNS 작동 방식
- DNS 확인 프로세스에는 호스트 이름을 IP 주소로 변환하는 과정 포함
- 웹 페이지 로딩과 관련된 DNS 서버
    - DNS 리커서
        - 웹 브라우저와 같은 애플리케이션을 통해 클라이언트 컴퓨터로부터 쿼리를 받도록 고안된 서버
        - 클라이언트의 DNS 쿼리를 충족시키기 위해 추가요청 수행
    - 루트 네임서버
        - 사람이 읽을 수 있는 호스트 이름을 IP 주소로 변환하는 첫번째 단계
        - 다른 더욱 특정한 위치에 대한 참고로 사용
    - TLD 네임서버
        - 최상위 도메인 서버
        - 특정 IP 주소 검색의 다음 단계
        - 호스트 이름의 마지막 부분을 호스팅 (ex : example.com 에서 .com)
    - 권한있는 네임서버
        - 네임 서버 쿼리의 마지막 중단점
        - 엑세스 권한을 가진 경우, 요ㅓㅇ한 호스트 이름의 IP 주소를 초기요청을 한 DNS 리커서에게 다시 보냄
        - ##### 권한이 있는 DNS 서버와 재귀 DNS 확인자의 차이점
            - DNS 인프라에 통합 된 서버를 나타내지만 다른역할 수행
            - DNS 쿼리 파이프라인 내부의 다른 위치에 자리
            - DNS 쿼리의 시작 부분([재귀 확인자]) 끝 부분([권한 있는 네임서버])
- ##### DNS 조회의 8단계
    - DNS 정보가 캐시되면 DNS 조회 프로세스에서 단계를 건너 뛰기 때문에 더 빠름
    1. 'example.com' 입력 -> 쿼리가 인터넷으로 이동 -> DNS [재귀 확인자]가 수신
    2. [재귀 확인자]에서 DNS 루트 이름 서버(....)를 쿼리
    3. 루트 서버에서 최상인 도메인(TLD) DNS 서버 (.com, .net 등등)의 주소 확인자에 응답
    4. 확인자가 .com TLD에 요청
    5. TLD 서버에서 도메인 서버의 IP 주소로 응답
    6. [재귀 확인자]가 도메인의 네임서버로 쿼리를 보냄
    7. IP 주소가 네임서버에서 확인자에게 반환
    8. DNS 확인자가 처음 요청한 도메인 IP 주소로 웹브라우저에 응답

- ##### DNS 확인자란
    -  DNS 조회의 첫번쨰 중단점, 초기 요청한 클라이언트 처리
    -  IP로 변환 되도록 하는 쿼리를 시작
        -  캐시되지 않은 DNS 조회에는 재귀쿼리와 반복 쿼리가 모두 포함
    -  재귀 DNS 쿼리와 재귀 DNS 확인자를 구별한 것이 중요!
    -  쿼리는 쿼리 확인을 요구하는 DNS 확인자에게 수행하는 요청
    -  DNS 재귀 확인자는 재귀 쿼리를 수락하고 필요한 요청을 수령하는 방식으로 응답 처리하는 컴퓨터를 말한다.

- ##### DNS 쿼리 유형
    - 세가지 쿼리 발생
    - DNS 확인을 위한 최적화 된 프로세스
    - 캐시된 레코드 데이터를 사용. DNS 네임서버가 비재귀 쿼리를 반환

##### 세가지 유형의 DNS 쿼리 
재귀 쿼리
```sh
 DNS 클라이언트는 확인자가 레코드를 찾을 수 없는 경우 DNS 서버가 요청한 리소스 레코드 또는 오류 메시지를 사용하여 클라이언트에 응답하도록 요구
```

반복 쿼리
```sh
- DNS 서버가 가능한 최상의 응답을 반환
- 쿼리한 DNS 서버가 쿼리 이름과 일치하지 않으며ㅑㄴ 하위 수준의 도메인 네임스페이스에 대해 권한 있는 DNS 서버에 대한 참조를 반환
- DNS 클라이언트가 참조 주소를 조회
- 오류 또는 제한 시간 초과가 발생 할 때까지 추가 DNS 서버가 쿼리체인을 중단한 상태로 지속
```

비재귀 쿼리
```sh
- DNS 확인자 클라이언트가 레코드에 대한 권한이 있거나 캐시 내부에 레코드가 있기 때문에 권한있는 레코드를 DNS 서버에 쿼리 할 때 발생
- 추가 대역 폭 소비 및 업스트림 서버의 로드를 방지하기 위해 DNS 레코드를 캐시
```

- ###### DNS 캐싱? 발생시기?
    - 목적: 데이터 요청에 대한 성능과 신뢰성을 개선 할 수 있는 장소에 데이터 임시 저장
    - DNS 캐싱
        - 요청하는 클라이언트에 더 가까운 곳에 데이터를 저장
        - DNS 쿼리를 더 빠르게 확인
        - DNS 조회 체인의 추가 쿼리를 피할 수 있음
        - 로드 시간 향상, 대역폭/ CPU 소비를 줄임
    - DNS 데이터는 다양한 위치에 캐시 될 수 있음
    - 각 위치는 TTL(Time-To-Live)에 의해 설정 된 시간 동안 DNS 레코드를 저장
    - 브라우저 DNS 캐싱
        - 목적: 기본적으로 정해진 시간동안 DNS 레코드를 캐시 하도록 설계
        - DNS 캐싱이 웹브라우저에 더 가까울수록 캐시를 확인하고 IP 주소에 대한 올바른 요청을 하기 위해 처리 단계를 더 적게 수행해야 함
        - DNS 레코드를 요청 할 떄 브라우저 캐시는 요청한 레크도를 확인하는 첫번쨰 위치
    - OS 수준 DNS 캐싱
        - 운영체제 수준 DNS 확인자는 DNS 쿼리가 컴퓨터를 떠나기전 두번쨰이자 마지막 로컬 중단점
        - 스탑 확인자(DNS 클라이언트) : 해당 쿼리를 처리하도록 설계 된 운영체제 내부 프로세스. 애플리케이션 요청시 자체 캐시 검사로 레코드 확인. 레코드가 없을 시 로컬 네트워크 외부의 (재귀 플래그가 설정된) DNS 쿼리를 인터넷 서비스 공급자(ISP) 내부의 DNS 재귀 확인자로 보냄
        
[재귀 확인자]: <>
[권한 있는 네임서버]: <>
